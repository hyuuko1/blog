import{_ as a,c as n,o as i,aj as l}from"./chunks/framework.CcbH9oJh.js";const d=JSON.parse('{"title":"pageflags 页标志","description":"","frontmatter":{"head":[["meta",{"property":"og:title","content":"pageflags 页标志 | Blog"}]]},"headers":[],"relativePath":"mm/pageflags.md","filePath":"mm/pageflags.md","lastUpdated":1761828946000}'),e={name:"mm/pageflags.md"};function p(t,s,r,h,k,g){return i(),n("div",null,s[0]||(s[0]=[l(`<h1 id="pageflags-页标志" tabindex="-1">pageflags 页标志 <a class="header-anchor" href="#pageflags-页标志" aria-label="Permalink to “pageflags 页标志”">​</a></h1><ul><li><a href="https://www.cnblogs.com/hellokitty2/p/18528107" target="_blank" rel="noreferrer">内存管理-38-页标志-1-pageflags - Hello-World3 - 博客园</a></li><li><a href="https://zhuanlan.zhihu.com/p/713935921" target="_blank" rel="noreferrer">Linux page flags - 知乎</a></li><li><a href="https://zhuanlan.zhihu.com/p/664104444" target="_blank" rel="noreferrer">Linux - 物理内存 - 知乎</a></li><li><a href="https://utopianfuture.github.io/kernel/Memory-Management.html" target="_blank" rel="noreferrer">Memory Management | What is the Utopian World!</a></li><li><em>The Linux Memory Manager</em> 2.1.3 Page flags</li></ul><div class="language-cpp line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Pagexxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SetPagexxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__SetPagexxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() 不保证原子性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TestSetPagexxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ClearPagexxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__ClearPagexxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TestClearPagexxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">folio_test_xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">folio_set_xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__folio_set_xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">folio_test_set_xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">folio_clear_xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__folio_clear_xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">folio_test_clear_xxx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 这两函数一样，判断 page/folio 是否是 hugetlb，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   判断依据：folio-&gt;page.page_type 的高 8 位来是否有 PGTY_hugetlb */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">folio_test_hugetlb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PageHuge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 是否是复合页，即分配时带有 __GFP_COMP flag 的页面，比如：hugetlb 或 thp 等等。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   判断依据是：PG_head 或者 page-&gt;compound_head 是否最低位是否为 1（即：是否是 subpage） */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PageCompound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PageTransCompound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li>目前 page_type 好像和 TLMM 讲的还不太一样</li></ul>`,4)]))}const o=a(e,[["render",p]]);export{d as __pageData,o as default};
