## kmod

- [Kernel module - ArchWiki](https://wiki.archlinux.org/title/Kernel_module)
- [Kernel Module Loading at Boot and modprobe Automation | Baeldung on Linux](https://www.baeldung.com/linux/kernel-module-load-boot)
- https://git.kernel.org/pub/scm/utils/kernel/kmod/kmod.git
- https://packages.fedoraproject.org/pkgs/kmod/kmod/index.html

```bash
# 提供了以下命令，实际上都是软链接，指向 /usr/bin/kmod
lsmod
modinfo
insmod
rmmod
modprobe
depmod
```

/etc/depmod.d/
/etc/modprobe.d/
/usr/lib/modprobe.d/

/etc/modules-load.d/ 是 systemd-udev 提供的。

```bash
$ cat > /etc/modules-load.d/vdpa.conf <<EOF
vp_vdpa
vhost_vdpa
EOF

# 重启后
$ systemctl status systemd-modules-load
Oct 28 22:07:44 L1 systemd-modules-load[764]: Inserted module 'vp_vdpa'
Oct 28 22:07:44 L1 systemd-modules-load[764]: Inserted module 'vhost_vdpa'
```

## strip

```bash
# 内核模块在插入时，insmod会使用模块的一些符号信息。不能 strip 太多东西，
# 别用 --strip-all
strip --strip-debug xxx.ko

```

## /proc

查看 /proc 时，建议使用 root 用户
